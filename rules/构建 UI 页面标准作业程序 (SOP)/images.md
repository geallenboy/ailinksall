好的，完全理解您的需求。我们之前的SOP是为“内容型”模块（如`blogs`和`workflows`）设计的，而`images`是一个“功能/工具型”模块，其核心在于**操作**（上传、管理）而非**展示**。

因此，我们需要对指令集进行深度重构，使其完全聚焦于图片管理的后台功能，同时保持原有SOP的严谨性和高标准。

这是一个为您精心重构和优化的指令集，请复制使用。

---

### **AI 协作指令集：构建 Images 模块后台管理 UI SOP**

#### **1. 新的使命：打造高效、可靠的图片中枢**
我们已经为 `images` 模块构建了坚实的基础设施（Types, Actions, Hooks）。现在，我们的使命是基于这套设施，构建一个功能强大、操作直观、体验流畅的**图片管理后台**。这个后台将成为整个项目所有图片的上传、管理和分发中枢，目标是实现“一次性交付一个完整、高质量的图片管理工具”。

#### **2. 你的角色：高级产品工程师**
你的角色是一名对代码质量、架构一致性和用户体验有极致追求的“高级产品工程师”。你的任务是精确地将我们已经设计好的图片数据流和业务逻辑，转化为一个高效、稳定、易用的后台管理界面。

#### **3. 核心蓝图与原则**
在本次任务中，所有决策都必须遵循以下原则：

* **唯一“黄金标准”**: `blogs` 模块的**后台管理页面**是我们所有新后台页面开发的唯一视觉和架构参考，尤其是在数据表格（DataTable）、筛选器和表单布局方面。
* **功能推导原则**: 所有UI功能都必须严格依据 `drizzle/schemas/images.ts` 中定义的 `images` 和 `imageCategories` 表结构进行逻辑推导。
* **页面是“组装车间”，组件是“标准零件”**: 所有UI逻辑都必须被拆分成独立的、可复用的组件，存放在 `src/features/images/components/` 中。页面文件本身应保持轻量，主要负责组织和布局这些组件。
* **国际化优先**: 所有面向用户的静态文本都必须使用 `next-intl` 的翻译函数（如 `t()`）进行包裹。

#### **4. UI 设计蓝图 (UI Design Blueprints)**
`images` 模块的后台开发必须严格遵循以下设计蓝图。**我们本次任务不考虑任何前台页面。**

##### **4.1 图片主列表页 (`.../backend/images/page.tsx`)**
* **顶部统计**: 展示核心统计数据（如：图片总数、分类总数、总占用空间-可留作TODO）。
* **核心操作**:
    * **“上传图片”按钮**: 点击后会弹出一个模态框（Dialog/Sheet），用于执行上传操作。
    * **筛选器**: 提供按“图片分类”进行筛选的功能。
* **数据表格 (DataTable)**:
    * **核心字段**: 必须包含图片**缩略图预览**、`altText`、所属分类、上传者、更新时间。
    * **“操作”列**:
        * **一键复制URL**: 一个按钮，点击后立即将该图片的公开访问地址复制到剪贴板，并给出成功提示。
        * **编辑**: 点击后弹出模态框，用于编辑图片的元数据（如`altText`、分类等）。
        * **删除**: 点击后有二次确认，然后执行删除操作。
    * **分页**: 包含标准的分页组件。

##### **4.2 图片分类管理**
* **实现方式**: 无需单独页面。在图片主列表页的顶部，放置一个**“管理分类”按钮**。
* **交互界面**: 点击“管理分类”按钮后，弹出一个模态框（Dialog/Sheet），内部实现对图片分类的完整CRUD操作（增、删、改、查列表）。这个组件应是自包含的。

##### **4.3 核心交互组件蓝图**
* **图片上传/编辑模态框 (`ImageUploadDialog.tsx`)**: 这是本模块最核心的组件。
    * **双重上传模式**:
        1.  **本地上传**: 一个拖拽区域或文件选择框，用于上传本地图片文件。
        2.  **URL上传**: 一个输入框，用于粘贴图片URL地址进行上传。
    * **上传流程**:
        * 选择或粘贴后，组件应立即调用 `createImage` Server Action。该Action内部已经包含了上传到 Cloudflare Images 的逻辑。
        * 在上传期间显示加载状态（Loading Spinner）。
        * 上传成功后，显示图片预览。
    * **元数据表单**: 图片上传成功后，下方出现表单，允许用户填写/修改 `altText`、`altTextZh` 并选择一个已有的“图片分类”。
    * **模式复用**: 此组件需支持两种模式：
        1.  **创建模式**: 用于“上传图片”按钮。
        2.  **编辑模式**: 用于表格中的“编辑”按钮，此时会预先加载并填充已有图片的信息。

#### **5. 整体构建工作流程 (SOP): The Holistic Build Workflow**
你必须严格遵循以下四个阶段的顺序，来完成 `images` 模块后台的完整开发。

##### **第一阶段：模块整体规划 (Module-Wide Planning)**
1.  **推导功能**: 基于数据库 Schema (`images` 和 `imageCategories`) 及上述蓝图，确认所需功能点：图片CRUD、图片分类CRUD、本地上传、URL上传、URL复制。
2.  **规划页面清单**:
    * `src/app/[locale]/backend/images/page.tsx`: 图片管理主页面。
3.  **规划核心共享组件**:
    * `ImageUploadDialog.tsx`: 负责图片创建（含两种上传方式）与编辑。
    * `ImageCategoryManager.tsx`: 在一个模态框内负责图片分类的完整CRUD。
    * `CopyUrlButton.tsx`: 负责一键复制URL并提供反馈的独立小组件。
    * `ImagesDataTable.tsx`: 承载图片列表、操作和分页的主组件。

##### **第二步：核心共享组件优先开发 (Shared Components First)**
* **任务**: 严格按照“由内而外”的原则，首先开发上一步规划的**核心共享组件**。开发顺序建议为：
    1.  `ImageCategoryManager.tsx` (最独立，逻辑简单)
    2.  `CopyUrlButton.tsx`
    3.  `ImageUploadDialog.tsx` (最复杂，核心所在)
    4.  `ImagesDataTable.tsx` (组装上述组件)
* **流程**: 对每一个组件，应用“静态布局 -> 数据集成 -> 质量验收”的微型开发流程。

##### **第三步：页面构建与质量保证 (Page Construction & QA)**
* **任务**: 在所有核心组件开发完毕后，开始构建主页面 `.../backend/images/page.tsx`。
* **微观SOP**:
    1.  **架构规划**: 页面职责是组合 `ImagesDataTable` 和 `ImageCategoryManager` 的触发按钮等。
    2.  **静态布局与国际化**: 使用 `shadcn/ui` 搭建页面骨架，并立即用 `t()` 函数包裹所有静态文本。
    3.  **数据集成**:
        * 调用 `useListImages` 和 `useListImageCategories` SWR Hooks 获取页面所需数据。
        * 将数据和 `mutation Hooks` (如 `useDeleteImage`) 作为 `props` 传递给 `ImagesDataTable` 组件。
        * **关键**: 确保所有数据都真实地从数据库中查询获取，**绝不使用任何模拟数据**。
    4.  **实现交互逻辑**: 将所有交互（如打开模态框、触发删除等）连接到对应的组件和Hooks上，确保有明确的用户反馈（Toasts/Notifications）和数据刷新（`revalidate`）。
    5.  **质量验收**: 自我审查，确保页面响应式良好、100% 类型安全，并移除所有冗余代码和`console.log`。

##### **第四步：模块联调与最终验收**
* **任务**: 当页面开发完毕后，进行最终的联调测试。完整地走一遍所有用户流程：
    1.  管理图片分类（增删改查）。
    2.  通过本地文件上传一张新图片，并填写元数据。
    3.  通过URL上传一张新图片，并填写元数据。
    4.  在表格中编辑一张图片的元数据。
    5.  复制一张图片的URL，并验证其正确性。
    6.  删除一张图片。
    7.  测试筛选和分页功能。

---
现在，请以“高级产品工程师”的身份开始这项完整的后台模块构建任务。我们的目标是打造一个功能完整、体验卓越的图片管理中心。